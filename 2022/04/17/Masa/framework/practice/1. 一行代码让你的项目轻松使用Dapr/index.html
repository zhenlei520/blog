<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  

  
  <title>1. 一行代码让你的项目轻松使用Dapr | 聽雨聲-成功來源於不斷的堅持</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="介绍Dapr简化了云原生开发，让开发可以把焦点放在应用的业务逻辑上，从而让代码简单、可移植，那作为一个.Net开发者，我们也希望项目可以快速用上dapr，那究竟应该如何做呢？ Dapr提出了Sidecar(边车)的概念，在启动项目时再额外启动一个Sidecar, 通过Sidecar可以解决进程间通信，为此官方提供了两种部署方式：  自托管方式下运行Dapr 在 Kubernetes 模式中部署和运">
<meta property="og:type" content="article">
<meta property="og:title" content="1. 一行代码让你的项目轻松使用Dapr">
<meta property="og:url" content="https://blogs.bflove.cn/2022/04/17/Masa/framework/practice/1.%20%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%A9%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%BD%BB%E6%9D%BE%E4%BD%BF%E7%94%A8Dapr/index.html">
<meta property="og:site_name" content="聽雨聲-成功來源於不斷的堅持">
<meta property="og:description" content="介绍Dapr简化了云原生开发，让开发可以把焦点放在应用的业务逻辑上，从而让代码简单、可移植，那作为一个.Net开发者，我们也希望项目可以快速用上dapr，那究竟应该如何做呢？ Dapr提出了Sidecar(边车)的概念，在启动项目时再额外启动一个Sidecar, 通过Sidecar可以解决进程间通信，为此官方提供了两种部署方式：  自托管方式下运行Dapr 在 Kubernetes 模式中部署和运">
<meta property="og:locale" content="en_US">
<meta property="og:image" content="https://s2.loli.net/2022/02/28/H4oiFnelVg2SG5D.png">
<meta property="og:image" content="https://i.loli.net/2021/11/19/NPsOdZuGfBep3DY.png">
<meta property="article:published_time" content="2022-04-17T09:00:00.000Z">
<meta property="article:modified_time" content="2022-04-21T10:01:43.115Z">
<meta property="article:author" content="聽雨聲">
<meta property="article:tag" content="Framework">
<meta property="article:tag" content="dapr">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="https://s2.loli.net/2022/02/28/H4oiFnelVg2SG5D.png">
  
    <link rel="alternate" href="/atom.xml" title="聽雨聲-成功來源於不斷的堅持" type="application/atom+xml">
  
  
    <link rel="icon" href="favicon.ico">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  
<link rel="stylesheet" href="/css/style.css">

<meta name="generator" content="Hexo 4.2.0"></head>

<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">聽雨聲-成功來源於不斷的堅持</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://blogs.bflove.cn"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Masa/framework/practice/1. 一行代码让你的项目轻松使用Dapr" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2022/04/17/Masa/framework/practice/1.%20%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%A9%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%BD%BB%E6%9D%BE%E4%BD%BF%E7%94%A8Dapr/" class="article-date">
  <time datetime="2022-04-17T09:00:00.000Z" itemprop="datePublished">2022-04-17</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/Net/">.Net</a>►<a class="article-category-link" href="/categories/Net/Framework/">Framework</a>►<a class="article-category-link" href="/categories/Net/Framework/Dapr/">Dapr</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      1. 一行代码让你的项目轻松使用Dapr
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <h2><span id="介绍">介绍</span></h2><p>Dapr简化了云原生开发，让开发可以把焦点放在应用的业务逻辑上，从而让代码简单、可移植，那作为一个.Net开发者，我们也希望项目可以快速用上dapr，那究竟应该如何做呢？</p>
<p>Dapr提出了Sidecar(边车)的概念，在启动项目时再额外启动一个Sidecar, 通过Sidecar可以解决进程间通信，为此官方提供了两种<a href="https://docs.dapr.io/zh-hans/operations/hosting/" target="_blank" rel="noopener">部署方式</a>：</p>
<ol>
<li>自托管方式下运行Dapr</li>
<li>在 Kubernetes 模式中部署和运行 Dapr</li>
</ol>
<p>其中Kubernetes模式部署是通过Kubernetes来完成的，在开发中我们更多的是通过自托管模式使用Dapr，那自托管模式是怎么做的呢？</p>
<p>使用命令行工具，在项目根目录输入：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dapr run --app-id assignment-server --app-port 5038 dotnet run</span><br></pre></td></tr></table></figure>

<blockquote>
<p>详细文档参考：<a href="https://www.cnblogs.com/doddgu/p/dapr-learning-3.html" target="_blank" rel="noopener">手把手教你学Dapr - 3. 使用Dapr运行第一个.Net程序</a></p>
</blockquote>
<p>参考以上<a href="https://www.cnblogs.com/doddgu/p/dapr-learning-3.html" target="_blank" rel="noopener">详细文档</a>操作后，我们就可以在命令行工具中执行<code>dapr invoke --app-id assignment-server --method hello</code>或者<a href="https://docs.dapr.io/zh-hans/reference/api/service_invocation_api/" target="_blank" rel="noopener">Http请求</a>来调用对应的应用的方法</p>
<p>看似好像也不是很复杂，但如果你需要调试dotnet项目呢？再复杂一点的需要启动多个项目进行调试呢？端口一多起来的确会显得很麻烦。</p>
<p>有没有什么办法可以解决呢？有，docker-compose。</p>
<p>但我还不想用这么重的东西，我想像平时开发项目一样直接在windows上运行可不可以？</p>
<a id="more"></a>



<h2><span id="masautilsdevelopmentdapraspnetcore-它来了">Masa.Utils.Development.Dapr.AspNetCore 它来了</span></h2><p>协助管理dapr进程，用于开发时减少对docker compose的依赖</p>
<p>瞌睡了就有人送枕头，一句话让我们了解到了它的作用，正好解决了我们需要通过命令行来启动dapr的问题，那下面我们看看这个怎么用：</p>
<h3><span id="入门">入门</span></h3><p>本着绝对不多写一行代码的心态，我们准备出发了……</p>
<ol>
<li><p>从大佬doddgu的博客的链接中发现一份源码地址，为防止后期文档调整，先fork一份到自己仓库</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/zhenlei520/dapr-study-room.git</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用命令行工具打开目录dapr-study-room\Assignment03，然后执行命令</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dotnet add package Masa.Utils.Development.Dapr.AspNetCore --version 0.4.0-preview.3</span><br></pre></td></tr></table></figure>

<blockquote>
<p>或使用Visual Studio打开解决方案Assignment03，选中Assignment.Server并安装Masa.Utils.Development.Dapr.AspNetCore</p>
</blockquote>
</li>
<li><p>打开<code>Program.cs</code>，并添加DaprStarter（注意看有注释的那一行）</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">using Masa.Utils.Development.Dapr.AspNetCore;</span><br><span class="line"></span><br><span class="line">var builder &#x3D; WebApplication.CreateBuilder(args);</span><br><span class="line">builder.Services.AddDaprStarter();&#x2F;&#x2F;添加DaprStarter即可</span><br><span class="line">var app &#x3D; builder.Build();</span><br><span class="line"></span><br><span class="line">app.Map(&quot;&#x2F;hello&quot;, () &#x3D;&gt; Console.WriteLine(&quot;Hello World!&quot;));</span><br><span class="line"></span><br><span class="line">app.Run();</span><br></pre></td></tr></table></figure>
</li>
<li><p>使用命令行工具执行命令验证dapr是否启动成功</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">dapr invoke --app-id Assignment-Server-00D861D0C0B7 --method hello</span><br></pre></td></tr></table></figure>

</li>
</ol>
<p>此时会有小伙伴问了，为什么app-id是Assignment-Server-00D861D0C0B7？</p>
<p>查看<a href="https://github.com/masastack/MASA.Utils/blob/main/src/Development/Masa.Utils.Development.Dapr/README.zh-CN.md#%E8%A7%84%E5%88%99" target="_blank" rel="noopener">文档</a>后发现<code>Masa.Utils.Development.Dapr.AspNetCore</code>的app-id生成规则为：<code>AppId + AppIdDelimiter + AppIdSuffix</code>，其中</p>
<ul>
<li>AppId默认：项目名.Replace(“.”,”-“)</li>
<li>AppIdSuffix默认：网卡地址</li>
</ul>
<p>由于我们的项目名为Assignment.Server，当前电脑的网卡地址是00D861D0C0B7，所以dapr最终的appid为Assignment-Server-00D861D0C0B7，到这里，Masa.Utils.Development.Dapr.AspNetCore的使用讲解已经完成了</p>
<blockquote>
<p>冷知识，为什么 . 要换成 - ？</p>
<p>因为Dapr的AppId采用FQDN：(Fully Qualified Domain Name)全限定域名：同时带有主机名和域名的名称。（通过符号“.”）</p>
<p>为什么要加网卡地址作为后缀？</p>
<p>因为目前自托管默认采用mDNS，会导致局域网内用户的AppId互相污染。你的同事和你一起在开发，都启动了A应用，你俩就自动负载了，那后果自然就是请求也到处跑了。</p>
</blockquote>
<h3><span id="进阶">进阶</span></h3><p>如果我希望自己指定AppId而不是使用默认的规则怎么办呢？目前支持三种写法:</p>
<ul>
<li>根据规则（配置默认装配） </li>
<li>根据规则 + 代码指定（配置自定义装配）</li>
<li>根据配置文件（根据IConfiguration配置生成）</li>
</ul>
<h4><span id="配置默认装配也是上面介绍的一行代码的方式">配置默认装配（也是上面介绍的一行代码的方式）</span></h4><p>修改<code>Program.cs</code>文件</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略上述代码</span></span><br><span class="line">builder.Services.AddDaprStarter();</span><br></pre></td></tr></table></figure>



<h4><span id="根据规则-代码指定配置自定义装配">根据规则 + 代码指定（配置自定义装配）</span></h4><p>修改<code>Program.cs</code>文件</p>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 省略上述代码</span></span><br><span class="line">builder.Services.AddDaprStarter(opt =&gt;</span><br><span class="line">&#123;</span><br><span class="line">    opt.AppId = <span class="string">"masa-dapr-test"</span>;</span><br><span class="line">    opt.AppPort = <span class="number">5001</span>;</span><br><span class="line">    opt.AppIdSuffix = <span class="string">""</span>;</span><br><span class="line">    opt.DaprHttpPort = <span class="number">8080</span>;</span><br><span class="line">    opt.DaprGrpcPort = <span class="number">8081</span>;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<blockquote>
<p>基于默认装配的升级版，在默认装配基础上通过指定特殊参数完成特殊需求，未配置的参数将使用默认值</p>
</blockquote>
<h4><span id="根据iconfiguration配置生成">根据IConfiguration配置生成</span></h4><ol>
<li>修改<code>appsettings.json</code></li>
</ol>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;DaprOptions&quot;: &#123;</span><br><span class="line">    &quot;AppId&quot;: &quot;masa-dapr-test&quot;,</span><br><span class="line">    &quot;AppPort&quot;: 5001,</span><br><span class="line">    &quot;AppIdSuffix&quot;: &quot;&quot;,</span><br><span class="line">    &quot;DaprHttpPort&quot;: 8080,</span><br><span class="line">    &quot;DaprGrpcPort&quot;: 8081</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>修改<code>Program.cs</code></li>
</ol>
<figure class="highlight csharp"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">builder.Services.AddDaprStarter(builder.Configuration.GetSection(<span class="string">"DaprOptions"</span>));</span><br></pre></td></tr></table></figure>

<blockquote>
<p>优势：更改appsettings.json配置后，dapr sidecar会自动更新，项目无需重启</p>
</blockquote>
<h2><span id="masautilsdevelopmentdapraspnetcore的设计思路">Masa.Utils.Development.Dapr.AspNetCore的设计思路</span></h2><p>设计思路基于两个方面，其一本机自动启动dapr sidecar还可以正常调试.Net项目，其二简化配置</p>
<h3><span id="技术选型">技术选型</span></h3><p>我们有两种启动dapr sidecar的方式：</p>
<ol>
<li>dapr run</li>
<li>daprd</li>
</ol>
<p>两者之间的差别如下所示：<img src="https://s2.loli.net/2022/02/28/H4oiFnelVg2SG5D.png" alt="image.png"></p>
<blockquote>
<p>完整的对比可查看：<a href="https://docs.dapr.io/reference/arguments-annotations-overview/" target="_blank" rel="noopener">https://docs.dapr.io/reference/arguments-annotations-overview/</a></p>
</blockquote>
<p>通过对比我们发现，我们的目标使用daprd与Dapr CLI都可以实现，那为什么Masa.Utils.Development.Dapr选择的是Dapr CLI，而不是daprd呢？</p>
<p>核心的原因是dapr可以通过dapr list命令很简单的就获取到当前运行的所有dapr程序，而daprd无法获取。如果使用daprd，那我们就需要使用C#代码通过操作dll获取具体执行的dapr命令，且多平台支持不好，所以暂时用了Dapr CLI</p>
<h3><span id="更优秀的dapr管理需要做到什么">更优秀的Dapr管理需要做到什么？</span></h3><ul>
<li>使用简单</li>
<li>参数可配置</li>
<li>功能支持选择性启动</li>
<li>Dapr保活</li>
<li>配置支持动态更新</li>
</ul>
<p>为了能更方便的使用，我们做了以下约定：</p>
<ol>
<li>针对dapr的非必填项，默认关闭不启用，手动配置参数后开启</li>
<li>针对dapr的必填项: app-id、app-port、dapr-http-port、dapr-grpc-port 自动生成并配置</li>
</ol>
<h4><span id="app-id-生成规则">app-id 生成规则</span></h4><p>其中dapr的app-id默认生成规则为：<code>AppId + AppIdDelimiter + AppIdSuffix</code>，其中</p>
<ul>
<li>AppId默认：项目名.Replace(“.”,”-“)</li>
<li>AppIdDelimiter默认：-</li>
<li>AppIdSuffix默认：当前机器网卡地址</li>
</ul>
<p>当AppIdSuffix赋值为空字符串，dapr的AppId的生成规则为：<code>AppId</code></p>
<h4><span id="app-port-获取">app-port 获取</span></h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">private ushort GetAppPort(DaprOptions options)</span><br><span class="line">&#123;</span><br><span class="line">  var server &#x3D; _serviceProvider.GetRequiredService&lt;IServer&gt;();</span><br><span class="line">  var addresses &#x3D; server.Features.Get&lt;IServerAddressesFeature&gt;()?.Addresses;</span><br><span class="line">  if (addresses is &#123; IsReadOnly: false, Count: 0 &#125;)</span><br><span class="line">      throw new Exception(&quot;Failed to get the startup port, please specify the port manually&quot;);</span><br><span class="line"></span><br><span class="line">  return addresses!</span><br><span class="line">      .Select(address &#x3D;&gt; new Uri(address))</span><br><span class="line">      .Where(address</span><br><span class="line">          &#x3D;&gt; (options.EnableSsl is true &amp;&amp; address.Scheme.Equals(Uri.UriSchemeHttps, StringComparison.OrdinalIgnoreCase))</span><br><span class="line">          || address.Scheme.Equals(Uri.UriSchemeHttp, StringComparison.OrdinalIgnoreCase))</span><br><span class="line">      .Select(address &#x3D;&gt; (ushort)address.Port).FirstOrDefault();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>为了防止启动过程中修改端口，过早的获取到被弃用的端口。因此我们使用后台任务启动dapr sidecar</p>
</blockquote>
<h4><span id="dapr-http-port-dapr-grpc-port获取">dapr-http-port、dapr-grpc-port获取</span></h4><p>因为支持用户配置，所以我们遵循下面的顺序</p>
<ol>
<li><p>如果指定端口，被占用则自动kill port所在进程，保证可以sidecar可以正常启动</p>
<blockquote>
<p>为什么端口占用就要先kill，复用不行吗？</p>
<p>因为sidecar有初始化配置，程序调整的代码影响到sidecar配置变更我们无法检测，所以启动时保证是最新的是比较合适的选择</p>
</blockquote>
</li>
<li><p>如果未指定端口，则交还给dapr，通过Dapr CLI的规则生成对应的http-port或grpc-port</p>
</li>
</ol>
<h4><span id="dapr保活">Dapr保活</span></h4><p>为了保证dapr进程是活跃的，我们在库中建立了一个心跳检查任务用来检测当前的dapr进程是否是活跃的，当dapr进程意外停止后会被重启，且配置信息与上一次成功的dapr配置保持不变</p>
<blockquote>
<p>如果不需要保活机制的话可以将EnableHeartBeat改为false，则不启用dapr保活机制</p>
</blockquote>
<h4><span id="配置支持动态更新">配置支持动态更新</span></h4><p>我们通过IOptionsMonitor<daproptions>的OnChange方法来监听配置的变更，当配置变更后我们会通过IDaprProcess 提供的Refresh方法来重启dapr进程，并重新调整环境变量信息</daproptions></p>
<h2><span id="本章源码">本章源码</span></h2><p>Assignment03</p>
<p><a href="https://github.com/zhenlei520/dapr-study-room" target="_blank" rel="noopener">https://github.com/zhenlei520/dapr-study-room</a></p>
<h2><span id="开源地址">开源地址</span></h2><p>MASA.BuildingBlocks：<a href="https://github.com/masastack/MASA.BuildingBlocks" target="_blank" rel="noopener">https://github.com/masastack/MASA.BuildingBlocks</a></p>
<p>MASA.Contrib：<a href="https://github.com/masastack/MASA.Contrib" target="_blank" rel="noopener">https://github.com/masastack/MASA.Contrib</a></p>
<p>MASA.Utils：<a href="https://github.com/masastack/MASA.Utils" target="_blank" rel="noopener">https://github.com/masastack/MASA.Utils</a></p>
<p>MASA.EShop：<a href="https://github.com/masalabs/MASA.EShop" target="_blank" rel="noopener">https://github.com/masalabs/MASA.EShop</a></p>
<p>MASA.Blazor：<a href="https://github.com/BlazorComponent/MASA.Blazor" target="_blank" rel="noopener">https://github.com/BlazorComponent/MASA.Blazor</a></p>
<p>如果你对我们的 MASA Framework 感兴趣，无论是代码贡献、使用、提 Issue，欢迎联系我们</p>
<p><img src="https://i.loli.net/2021/11/19/NPsOdZuGfBep3DY.png" alt="16373211753064.png"></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://blogs.bflove.cn/2022/04/17/Masa/framework/practice/1.%20%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%A9%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%BD%BB%E6%9D%BE%E4%BD%BF%E7%94%A8Dapr/" data-id="cl2yutsfo002cdovchjgv740r" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Framework/" rel="tag">Framework</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/dapr/" rel="tag">dapr</a></li></ul>

    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2022/05/09/%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/%E5%8F%8D%E5%B0%84/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          高级编程/反射
        
      </div>
    </a>
  
  
    <a href="/2022/04/17/Masa/framework/practice/2.%20%E8%AE%A9%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E6%9B%B4%E7%AE%80%E5%8D%95/" id="article-nav-older" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Older</strong>
      <div class="article-nav-title">2. 让服务调用更简单 - Caller.HttpClient</div>
    </a>
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/Net/">.Net</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Net/Framework/">Framework</a><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/Net/Framework/Dapr/">Dapr</a></li></ul></li></ul></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list" itemprop="keywords"><li class="tag-list-item"><a class="tag-list-link" href="/tags/CSharp%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" rel="tag">CSharp基础语法</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/DI-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" rel="tag">DI 依赖注入</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Docker/" rel="tag">Docker</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/ElasticSearch/" rel="tag">ElasticSearch</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Es/" rel="tag">Es</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Framework/" rel="tag">Framework</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/IOC/" rel="tag">IOC</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NetCore/" rel="tag">NetCore</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/NetCore%E9%94%99%E8%AF%AF/" rel="tag">NetCore错误</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/dapr/" rel="tag">dapr</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" rel="tag">设计模式</a></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/%E9%85%8D%E7%BD%AE-Configuration/" rel="tag">配置(Configuration)</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/CSharp%E5%9F%BA%E7%A1%80%E8%AF%AD%E6%B3%95/" style="font-size: 16px;">CSharp基础语法</a> <a href="/tags/DI-%E4%BE%9D%E8%B5%96%E6%B3%A8%E5%85%A5/" style="font-size: 10px;">DI 依赖注入</a> <a href="/tags/Docker/" style="font-size: 14px;">Docker</a> <a href="/tags/ElasticSearch/" style="font-size: 20px;">ElasticSearch</a> <a href="/tags/Es/" style="font-size: 18px;">Es</a> <a href="/tags/Framework/" style="font-size: 12px;">Framework</a> <a href="/tags/IOC/" style="font-size: 10px;">IOC</a> <a href="/tags/NetCore/" style="font-size: 10px;">NetCore</a> <a href="/tags/NetCore%E9%94%99%E8%AF%AF/" style="font-size: 10px;">NetCore错误</a> <a href="/tags/dapr/" style="font-size: 10px;">dapr</a> <a href="/tags/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" style="font-size: 12px;">设计模式</a> <a href="/tags/%E9%85%8D%E7%BD%AE-Configuration/" style="font-size: 10px;">配置(Configuration)</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/05/">May 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2022/04/">April 2022</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/12/">December 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/11/">November 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/10/">October 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/09/">September 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/08/">August 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/07/">July 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/04/">April 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2021/03/">March 2021</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/08/">August 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2020/03/">March 2020</a></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2019/08/">August 2019</a></li></ul>
    </div>
  </div>


  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recent Posts</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2022/05/09/%E9%AB%98%E7%BA%A7%E7%BC%96%E7%A8%8B/%E5%8F%8D%E5%B0%84/">高级编程/反射</a>
          </li>
        
          <li>
            <a href="/2022/04/17/Masa/framework/practice/1.%20%E4%B8%80%E8%A1%8C%E4%BB%A3%E7%A0%81%E8%AE%A9%E4%BD%A0%E7%9A%84%E9%A1%B9%E7%9B%AE%E8%BD%BB%E6%9D%BE%E4%BD%BF%E7%94%A8Dapr/">1. 一行代码让你的项目轻松使用Dapr</a>
          </li>
        
          <li>
            <a href="/2022/04/17/Masa/framework/practice/2.%20%E8%AE%A9%E6%9C%8D%E5%8A%A1%E8%B0%83%E7%94%A8%E6%9B%B4%E7%AE%80%E5%8D%95/">2. 让服务调用更简单 - Caller.HttpClient</a>
          </li>
        
          <li>
            <a href="/2021/12/13/ElasticSearch/4.%20%E5%88%86%E8%AF%8D/">4. 分词</a>
          </li>
        
          <li>
            <a href="/2021/12/13/ElasticSearch/3.%20%E5%AD%97%E6%AE%B5%E7%B1%BB%E5%9E%8B/">3. 字段类型</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2022 聽雨聲<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  
<link rel="stylesheet" href="/fancybox/jquery.fancybox.css">

  
<script src="/fancybox/jquery.fancybox.pack.js"></script>




<script src="/js/script.js"></script>




  </div>
</body>
</html>